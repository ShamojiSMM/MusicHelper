<!DOCTYPE html>
<html lang="ja">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  
  <link rel="icon" type="image/x-icon" href="images/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon-180x180.png">
  <link rel="stylesheet" href="style.css" type="text/css">

  <title>Track Music Conductor</title>
</head>

<body>
  <h1>
    <span class="ja">レール演奏補助ツール</span>
    <span class="en">Track Music Conductor</span>
  </h1>

  <p class="p3">
    <span class="ja">レール演奏で使えそうな機能の寄せ集め。</span>
    <span class="en">A mishmash of functions for Track Music!</span>
  </p><br>
  <p class="p3 gray">(Last Update: 2024/Apr/20)</p><br><br>

  <p class="p3 bold">Language(Beta):</p>
  <select id="selectLanguage" onchange="funLanguage(this.selectedIndex)">
    <option>Japanese</option>
    <option>English</option>
  </select>

  <hr>
  <h2>
    <span class="ja">目次</span>
    <span class="en">Contents</span>
  </h2>
  <div class="contents">
    <ol>
      <li><a href="#bpmAndNoteValue">
        <span class="ja">BPMと符長</span>
        <span class="en">BPM and Note Length</span>        
      </a></li>
      <li><a href="#barValue">
        <span class="ja">小節計算</span>
        <span class="en">Bar Calculation</span>       
      </a></li>
      <li><a href="#railLoopGenerator">
        <span class="ja">レールループ生成</span>
        <span class="en">Loop-Track Generation</span>       
      </a></li>
      <li><a href="#railLoopCycle">
        <span class="ja">レールループ周期計算</span>
        <span class="en">Loop-Track Calculation</span>       
      </a></li>
      <li><a href="#tableCulculator">
        <span class="ja">表計算</span>
        <span class="en">Spread Sheet to Collect Notes</span>     
      </a></li>
      <li><a href="#wiringGenerator">
        <span class="ja">縦集音配置生成</span>
        <span class="en">Collection-Track Generation</span>       
      </a></li>
      <li><a href="#imageGallery">
        <span class="ja">画像</span>
        <span class="en">Images</span>       
      </a></li>
      <li><a href="#scrollSpeedTable">
        <span class="ja">スクロール遅度表</span>
        <span class="en">Scroll Speeds Table</span>
      </a></li>
      <li><a href="#grobalGrounds">
        <span class="ja">グローバル音源配置集</span>
        <span class="en">Global Contraptions</span>       
      </a></li>
      <li><a href="#diary">
        <span class="ja">雑記 / 参考文献・資料</span>
        <span class="en">Afterword / References</span>       
      </a></li>
    </ol>
  </div>

  <hr id="bpmAndNoteValue">
  <h2>
    <span class="ja">BPMと符長</span>
    <span class="en">BPM and Note Length</span>
  </h2>
  <p class="p3">
    <span class="ja">音符の長さとBPMを計算。</span>
    <span class="en">Calculate note length and BPM.</span>
  </p><br>

  <p class="p3 bold">
    <span class="ja">4分符長[f]:</span>
    <span class="en">Quarter Note Length [f]:</span>
  </p>
  <input type="number" oninput="funBeatValue(this.value)">

  <p class="p3 bold">BPM:</p>
  <span id="spanBpm" class="result"></span>
  <br>

  <table id="tableBeats">
    <tr>
      <th>
        <span class="ja">分符</span>
        <span class="en">Note</span>
      </th>
      <th>
        <span class="ja">拍</span>
        <span class="en">Beat</span>
      </th>
      <th>
        <span class="ja">記号</span>
        <span class="en">Symbol</span>
      </th>
      <th>
        <span class="ja">長さ[f]</span>  
        <span class="en">Length [f]</span>
      </th>
    </tr>
    <tr>
      <td>
        <span class="ja">1</span>
        <span class="en">Whole</span>
      </td>
      <td>4.000</td><td>𝅝</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">付点2</span>
        <span class="en">Dotted Harf</span>
      </td>
      <td>3.000</td><td>𝅗𝅥.</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">2</span>
        <span class="en">Harf</span>
      </td>
      <td>2.000</td><td>𝅗𝅥</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">付点4</span>
        <span class="en">Dotted Quarter</span>
      </td>
      <td>1.500</td><td>𝅘𝅥.</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">4</span>
        <span class="en">Quarter</span>
      </td>
      <td>1.000</td><td>𝅘𝅥</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">付点8</span>
        <span class="en">Dotted Eighth</span>
      </td>
      <td>0.750</td><td>𝅘𝅥𝅮.</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">8</span>
        <span class="en">Eighth</span>
      </td>
      <td>0.500</td><td>𝅘𝅥𝅮</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">16</span>
        <span class="en">Sixteenth</span>
      </td>
      <td>0.250</td><td>𝅘𝅥𝅯</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">3</span>
        <span class="en">Triple Harf</span>
      </td>
      <td>1.333</td>
      <td>𝅗𝅥𝅗𝅥𝅗𝅥</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">6</span>
        <span class="en">Triple Quarter</span>
      </td>
      <td>0.666</td><td>𝅘𝅥𝅘𝅥𝅘𝅥</td><td></td>
    </tr>
    <tr>
      <td>
        <span class="ja">12</span>
        <span class="en">Triple Eighth</span>
      </td>
      <td>0.333</td><td>𝅘𝅥𝅮𝅘𝅥𝅮𝅘𝅥𝅮</td><td></td>
    </tr>   
  </table>

  <br>
  <p class="p3 bold">BPM:</p>
  <input type="number" oninput="funBpm(this.value)">

  <p class="p3 bold">
    <span class="ja">4分符長[f]:</span>
    <span class="en">Quarter Note Length [f]:</span>
  </p>
  <span id="spanBeatValue" class="result"></span>

  <hr id="barValue">
  <h2>
    <span class="ja">小節計算</span>
    <span class="en">Bar Calculation</span>
  </h2>
  <p class="p3">
    <span class="ja">小節や曲の長さを計算。</span>
    <span class="en">Calculate the length of bars or music.</span>
  </p><br>

  <p class="p3 bold">
    <span class="ja">4分符長[f]:</span>  
    <span class="en">Quarter Note Length [f]:</span>
  </p>
  <input type="number" id="inputBarBeatValue" oninput="funBarValue()">

  <p class="p3 bold">
    <span class="ja">拍子:</span>  
    <span class="en">Rhythm:</span>
  </p>
  <input type="number" id="inputSignature0" oninput="funBarValue()" value="4">
  <p class="p3 bold">/</p>
  <input type="number" id="inputSignature1" oninput="funBarValue()" value="4"><br>
  
  <p class="p3 bold">
    <span class="ja">小節数:</span>  
    <span class="en">Number of Bars:</span>
  </p>
  <input type="number" id="inputBarNumber" oninput="funBarValue()"><br><br>
  
  <p class="p3 bold">
    <span class="ja">長さ[f]:</span>  
    <span class="en">Length [f]:</span>
  </p>
  <span id="spanBarValue" class="result"></span>

  <hr id="railLoopGenerator">
  <h2>
    <span class="ja">レールループ生成</span>
    <span class="en">Loop-Track Generation</span>
  </h2>
  <p class="p3">
    <span class="ja">任意の周期のレールループを作成。</span>
    <span class="en">Generate loop-tracks of any period.</span>
  </p><br>

  <select id="selectLoopType" onchange="funLoopType(this.selectedIndex)">
    <option class="ja">羽あり往復</option>
    <option class="en">Winged, Reciprocating</option>
    
    <option class="ja">羽あり特殊</option>
    <option class="en">Winged, Special</option>

    <option class="ja">羽あり周回</option>
    <option class="en">Winged, Circulating</option>

    <option class="ja">羽なし往復</option>
    <option class="en">Non-Winged, Reciprocating</option>
  </select>
  
  <p class="p3 bold">
    <span class="ja">周期[f]:</span>
    <span class="en">Period [f]:</span>
  </p>
  <input type="number" id="inputLoop">
  <button onclick="funLoop()">
    <span class="ja">生成</span>
    <span class="en">Generate</span>
  </button>
  
  <p id="pLoopsText" class="p2">
    <span class="ja">(直線, 斜線, 曲線, うるう) の本数。</span>
    <span class="en">Number of (Straight, Diagonal, Curved, Cu).</span>
  </p><br><br>

  <span id="spanLoops" class="result"></span>
  
  <div id="divSpecial">
    <p id="pSpecialText" class="p3 bold">
      <span class="ja">直線追加[本]:</span>
      <span class="en">Adding Straight:</span>
    </p>
    <span id="spanSpecial" class="result"></span><br>
  
    <img id="imageLoop">
  </div>

  <hr id="railLoopCycle">
  <h2>
    <span class="ja">レールループ周期計算</span>
    <span class="en">Loop-Track Calculation</span>
  </h2>
  <p class="p3">
    <span class="ja">レールの本数から周期を計算。</span>
    <span class="en">Calculate the period from tracks.</span>
  </p><br>

  <select id="selectCycle">
    <option class="ja">羽あり往復</option>
    <option class="en">Winged, Reciprocating</option>

    <option class="ja">羽あり周回</option>
    <option class="en">Winged, Circulating</option>
    
    <option class="ja">羽なし往復</option>
    <option class="en">Non-Winged, Reciprocating</option>

    <option class="ja">羽なし周回</option>
    <option class="en">Non-Winged, Circulating</option>
  </select>

  <p class="p3 bold">:</p>
  <button onclick="funCycle()">
    <span class="ja">計算</span>
    <span class="en">Calculate</span>
  </button><br>

  <p class="p3 bold">
    <span class="ja">直線[本]:</span>
    <span class="en">Straight:</span>
  </p>
  <input type="number" id="inputCycleStraight">

  <p class="p3 bold">
    <span class="ja">斜線[本]:</span>
    <span class="en">Diagonal:</span>
  </p>
  <input type="number" id="inputCycleDiagonal">

  <p class="p3 bold">
    <span class="ja">曲線[本]:</span>
    <span class="en">Curved:</span>
  </p>
  <input type="number" id="inputCycleCurved">

  <p class="p3 bold">
    <span class="ja">うるう[個]:</span>
    <span class="en">Cu:</span>
  </p>
  <input type="number" id="inputCycleCorrection"><br><br>

  <p class="p3 bold">
    <span class="ja">周期[f]:</span>
    <span class="en">Period [f]:</span>
  </p>
  <span id="spanCycle"></span>

  <hr id="tableCulculator">
  <h2>
    <span class="ja">表計算</span>
    <span class="en">Spread Sheet to Collect Notes</span>
  </h2>
  <p class="p3">
    <span class="ja">MIDIインポート可! 自動でいい配線を探してくれます。</span>
    <span class="en">MIDI importable!</span>

    <a href="https://www.youtube.com/watch?v=wNRr32pd0Es">
      <span class="ja">解説動画</span>
      <span class="en">Video</span>
    </a>
  </p><br>

  <p class="p3 bold">
    <span class="ja">MIDIファイル:</span>
    <span class="en">MIDI File:</span>
  </p>
  <input type="file" accept=".mid, .midi, .smf" id="inputSmf">

  <p class="p3 bold">
    <span class="ja">トラック:</span>
    <span class="en">Track:</span>
  </p>
  <select id="selectTrack">
    <option>1</option><option>2</option><option>3</option><option>4</option>
    <option>5</option><option>6</option><option>7</option><option>8</option>
    <option>9</option><option>10</option><option>11</option><option>12</option>
    <option>13</option><option>14</option><option>15</option><option>16</option>
  </select><br>

  <button id="buttonLoadSmf">
    <span class="ja">読み込み</span>
    <span class="en">Import</span>
  </button><br><br>

  <div id="divTimeUnit">
    <p class="p3 bold">
      <span class="ja">4分符音価:</span>
      <span class="en">Quarter Note Value:</span>
    </p>
    <input type="number" id="inputTimeUnit" value="480" oninput="funTimeUnit()">    
  </div>

  <p class="p3 bold">
    <span class="ja">4分符長[f]:</span>
    <span class="en">Quarter Note Length [f]:</span>
  </p>
  <input type="number" id="inputTableBeat" oninput="funTableBeat(this.value)">

  <p class="p3 bold">BPM:</p>
  <span id="spanTableBpm" class="result"></span><br>

  <p class="p3 bold">
    <span class="ja">基準音階:</span>
    <span class="en">Base Key:</span>
  </p>
  <select id="selectScale">
    <option>D#</option><option>D</option><option>C#</option>
    <option>C</option><option>B</option><option>A#</option>
    <option>A</option><option>G#</option><option>G</option>
    <option>F#</option><option>F</option><option>E</option>
    <option>D#</option><option>D</option><option>C#</option>
    <option selected>C</option>
    <option>B</option><option>A#</option><option>A</option>
    <option>G#</option><option>G</option><option>F#</option>
    <option>F</option><option>E</option><option>D#</option>
    <option>D</option><option>C#</option><option>C</option>
 </select>

  <button onclick="funPlay()">
    <span class="ja">演奏</span>
    <span class="en">Play</span>
  </button>
  
  <p class="p3 bold">
    <span class="ja">音色:</span>
    <span class="en">Instrument:</span>
  </p>
  <select id="selectInstrument">
    <option class="ja">正弦波</option>
    <option class="en">Sine Wave</option>

    <option class="ja">三角波</option>
    <option class="en">Triangle Wave</option>

    <option class="ja">矩形波</option>
    <option class="en">Square Wave</option>
    
    <option class="ja">ノコギリ波</option>
    <option class="en">Sawtooth Wave</option>
    
    <option class="ja">ピアノ</option>
    <option class="en">Piano</option>
    
    <option class="ja">トランペット</option>
    <option class="en">Trampet</option>

    <option class="ja">スティールパン</option>
    <option class="en">Steelpan</option>

    <option class="ja">ヴァイオリン</option>
    <option class="en">Violin</option>
  </select>

  <button onclick="funStopPlay()">
    <span class="ja">演奏停止</span>
    <span class="en">Stop</span>
  </button><br>

  <div class="divScroll">
    <table id="tableInput" class="tableWirings">
      <tr class="index">
        <th class="th">
          <span class="ja">番号</span>
          <span class="en">Index</span>
        </th>
      </tr>
      <tr class="normal">
        <th class="th">
          <span class="ja">メモ</span>
          <span class="en">Memo</span>
        </th>
      </tr>
      <tr class="input">
        <th class="th">
          <select id="selectTableInput" onchange="funTableInput()">
            <option class="ja">音価</option>
            <option class="en">Note Value</option>
            
            <option class="ja">n分符</option>
            <option class="en">Nth Note</option>
          </select>
        </th>
      </tr>
      <tr class="input">
        <th class="th">
          <span class="ja">符長[f]</span>
          <span class="en">Length [f]</span>
        </th>
      </tr>
      <tr class="input">
        <th class="th">
          <span class="ja">yズレ[b]</span>
          <span class="en">Y Offset [b]</span>
        </th>
      </tr>
    </table>
  </div><br>

  <p class="p3 bold">
    <span class="ja">読み込みタイプ:</span>
    <span class="en">Loading Type:</span>
  </p>
  <select id="selectLoading" onchange="funLoading(this.selectedIndex)">
    <option class="ja">開始画面(全て同時)</option>
    <option class="en">Instant</option>

    <option class="ja">自由落下</option>
    <option class="en">Freefall</option>

    <option class="ja">縦スクロール</option>
    <option class="en">Vertical Scroll</option>

    <option class="ja">横スクロール</option>
    <option class="en">Horizontal Scroll</option>
  </select>

  <select id="selectLoadingSpeedInput" onchange="funLoadingSpeedInput(this.selectedIndex)">
    <option class="ja">カスタム</option>
    <option class="en">Custom</option>

    <option class="ja" selected>平均遅度</option>
    <option class="en">Average Slowness</option>
    
    <option class="ja">遅度周期</option>
    <option class="en">Slowness Cycle</option>
  </select>
  <br>
  <div id="divLoadingSpeedAverage">
    <p class="p3 bold">
      <span class="ja">平均スクロール遅度[f/b]:</span>
      <span class="en">Average Scroll Slowness [f/b]:</span>
    </p>
    <input type="number" id="inputLoadingSpeedAverage" oninput="funLoadingSpeedAverage(this.value)">
    <p class="p2">
      <span class="ja">上向き, 右向きを正とする(自由落下 = -4)。</span>
      <span class="en">Upward, rightward is positive (freefall = -4 f/b).</span>
    </p>
  </div>

  <div id="divLoadingSpeedCycle">
    <p class="p3 bold">
      <span class="ja">スクロール遅度周期[f/b]:</span>
      <span class="en">Scroll Slowness Cycle [f/b]:</span>
    </p>
    <input type="text" id="inputLoadingSpeedCycle" style="height: 35px; width: 200px;" oninput="funLoadingSpeedCycle(this.value)">
    <p class="p2">
      <span class="ja">値をコンマ区切りで入力(例: 6, 7, 6, 7, 6)。</span>
      <span class="en">Input values separated by commas (e.g. 6, 7, 6, 7, 6).</span>
    </p>
  </div>
  
  <p class="p3 bold">
    <span class="ja">着線パターン:</span>
    <span class="en">Landing Pattern:</span>
  </p>
  <select id="selectLanding" onchange="funLanding(this.selectedIndex)">
    <option class="ja">カスタム</option>
    <option class="en">Custom</option>
    <option>1</option><option>2</option>
    <option>3</option><option>4</option>
  </select><br>

  <button onclick="funAllocation()">
    <span class="ja">上の表を下に代入</span>
    <span class="en">Transfer the Values</span>
  </button><br>

  <div class="divScroll">
    <table id="tableWiring" class="tableWirings">
      <tr class="index">
        <th class="th">
          <span class="ja">番号</span>
          <span class="en">Index</span>
        </th>
      </tr>
      <tr class="normal">
        <th class="th">
          <span class="ja">メモ</span>
          <span class="en">Memo</span>
        </th>
      </tr>
      <tr class="input">
        <th class="th">
          <span class="ja">遅延[f]</span>
          <span class="en">Delay [f]</span>
        </th>
      </tr>
      <tr class="input">
        <th class="th">
          <span class="ja">xズレ[f]</span>
          <span class="en">X Offset [f]</span>
        </th>
        <td>0</td>
      </tr>
      <tr class="input" style="display: none;">
        <th class="th">
          <span class="ja">横スク遅度[f]</span>
          <span class="en">Scroll Delay [f]</span>
        </th>
        <td>0</td>
      </tr>
      <tr class="input">
        <th class="th">
          <span class="ja">yズレ[b]</span>
          <span class="en">Y Offset [b]</span>
        </th>
        <td>0</td>
      </tr>
    </table>
  </div><br>

  <p class="p3 bold">
    <span class="ja">基準遅延[f]:</span>
    <span class="en">Base Delay [f]:</span>
  </p>
  <input type="number" id="inputBaseDelay">

  <p class="p3 bold">
    <span class="ja">基準高さ[b]:</span>
    <span class="en">Base Height [b]:</span>
  </p>
  <input type="number" id="inputBaseHeight">
  <br>
  <button onclick="funWiringSort()">
    <span class="ja">並び替えを探す</span>
    <span class="en">Find a Good Sort</span>
  </button>

  <p class="p2"><p class="bold">
    <span class="ja">個数:</span>
    <span class="en">Quantities:</span>
  </p>
  <p class="p2">[<span id="spanEvaluations">◎: ○: △: ×: </span>]</p><br>

  <div class="divScroll">
    <table id="tableSort" class="tableWirings">
      <tr class="index">
        <th class="th">
          <span class="ja">番号</span>
          <span class="en">Index</span>
        </th>
      </tr>
      <tr class="normal">
        <th class="th">
          <span class="ja">メモ</span>
          <span class="en">Memo</span>
        </th>
      </tr>
      <tr class="blue">
        <th class="th">
          <span class="ja">結果[f]</span>
          <span class="en">Result [f]</span>
        </th>
      </tr>
      <tr class="red">
        <th class="th">
          <span class="ja">高さ[b]</span>
          <span class="en">Height [b]</span>
        </th>
      </tr>
      <tr class="normal">
        <th class="th">
          <span class="ja">配置可</span>
          <span class="en">Wirable</span>
        </th>
      </tr>
      <tr class="normal">
        <th class="th">
          <span class="ja">生成</span>
          <span class="en">Generate</span>
        </th>
      </tr>
    </table>
  </div><br>

  <button onclick="funOverview()">
    <span class="ja">全体像を表示</span>
    <span class="en">Show the Overview</span>
  </button>

  <button onclick="funRemoveOverview()">
    <span class="ja">非表示</span>
    <span class="en">Hide</span>
  </button><br>

  <div class="divScroll" id="divOverview">
    <canvas id="canvasOverview" height="0"></canvas>
  </div>

  <hr id="wiringGenerator">
  <h2>
    <span class="ja">縦集音配置生成</span>
    <span class="en">Collection-Track Generation</span>
  </h2>
  <p class="p3">
    <span class="ja">縦レールによる集音(ぜんまいメソッド)の配置を探します。</span>
    <span class="en">Look for Vertical Collection-Tracks.</span>
  </p><br>

  <canvas id="canvasWiring" width="32" height="320"></canvas>
  <div class="divWiringGenerator">
    <p class="p3 bold">
      <span class="ja">狙いの値[f]:</span>
      <span class="en">Target Value [f]:</span>
    </p>
    <input type="number" id="inputTarget">

    <p class="p3 bold">
      <span class="ja">着線レールとの距離[b]:</span>
      <span class="en">Distance to Delivery Track [b]:</span>
    </p>
    <input type="number" id="inputHeight">

    <button onclick="funTarget()">
      <span class="ja">探す</span>
      <span class="en">Find</span>
    </button><br>

    <select id="selectSort" onchange="funSort()">
      <option class="ja">↓長さ 短い順</option>
      <option class="en">↓Length, Asc-Order</option>

      <option class="ja">↓長さ 長い順</option>
      <option class="en">↓Length, Des-Order</option>

      <option class="ja" selected>↑長さ 短い順</option>
      <option class="en">↑Length, Asc-Order</option>

      <option class="ja">↑長さ 長い順</option>
      <option class="en">↑Length, Des-Order</option>
    </select>
    
    <p class="p2">
      <span class="ja">( 遅延 / ↓長さ / ↑長さ / 表記 )。クリックで画像出ます。</span>
      <span class="en">( Delay / ↓Length / ↑Length / Wiring ). Click to view image.</span><br>

    <label>
      <input type="checkbox" id="checkWiringImage" checked>
      <span class="ja">実行時に画像表示(一致の左端の配置)。</span>
      <span class="en">View Image at Runtime</span>
    </label></p><br><br>

    <p class="p3 bold">
      <span class="ja">一致:</span>
      <span class="en">Match:</span>
    </p><br>
    <div id="divSame"></div><br>

    <p class="p3 bold">
      <span class="ja">誤差:</span>
      <span class="en">Error:</span>
    </p><br>
    <div id="divNear"></div><br>

    <p class="p3 bold">
      <span class="ja">もっと誤差:</span>
      <span class="en">More Error:</span>
    </p><br>
    <div id="divFar"></div>
  </div>

  <hr id="imageGallery">
  <h2>
    <span class="ja">画像</span>
    <span class="en">Images</span>
  </h2><br>

  <p class="p3">
    <span class="ja">周回型, 往復型, 特殊型 の羽ありループ。</span>
    <span class="en">Circulating, Reciprocating, Special Loop-Tracks.</span>
  </p><br>
  <img src="images/info/loops.png" height="180"><br><br>

  <p class="p3">
    <span class="ja">G = ギャップ, R = レール, b = マス(ブロック)。</span>
    <span class="en">G = gap, R = rail(track), b = block(tile).</span>
  </p><br>
  <img src="images/info/gaps.png" height="140">
  <img src="images/info/height.png" height="140"><br><br>
  
  <p class="p3">
    <span class="ja">着線パターン</span>
    <span class="en">Landing Patterns.</span>
  </p><br>
  <img src="images/info/landing.png" height="180">

  <hr id="scrollSpeedTable">
  <h2>
    <span class="ja">スクロール遅度表</span>
    <span class="en">Scroll Speeds Table</span>
  </h2>
  <p class="p3"><a href="https://www.youtube.com/watch?v=3VlLrf_5KvA">
    <span class="ja">一部参考</span>
    <span class="en">Reference</span>
  </a></p><br>

  <p class="p2">
    <span class="ja">数値の単位は[f/b], 1b進むのにかかる時間。</span>
    <span class="en">The unit of numbers is "Slowness [f/b]", the time it takes to move 1 block.</span>
  </p>

  <table class="tableSpeeds">
    <tr class="index">
      <th rowspan="100" class="lightGreen">
        <span class="ja">横</span>
        <span class="en vertical">Horizontal</span>
      </th>
      <th>
        <span class="ja">スクロール方法</span>
        <span class="en">Scroll</span>
      </th>
      <th>
        <span class="ja">平均</span>
        <span class="en">Average</span>
      </th>
      <th>
        <span class="ja">周期</span>
        <span class="en">Cycle</span>
      </th>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">強制(遅), クリボー</span>
        <span class="en">Auto(slow), Goomba</span>
      </td>
      <td>32.000</td><td>32...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">強制(中), コンベア(中)</span>
        <span class="en">Auto(normal), Conveyor(normal)</span>
      </td>
      <td>16.000</td><td>16...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">強制(速), コンベア(速)</span>
        <span class="en">Auto(fast), Conveyor(fast)</span>
      </td>
      <td>8.000</td><td>8...</td>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">青ドクロ, コンベア(中)+歩き, <br>コンベア(速)+クリボー</span>
        <span class="en">Fast Lava Lift, Conveyor(normal)+Walking, <br>Conveyor(fast)+Goomba</span>
      </td>
      <td>6.400</td><td>6, 6, 7, 6, 7...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">走り, ドッスン</span>
        <span class="en">Running, Thwomp</span>
      </td>
      <td>5.333</td><td>5, 5, 6...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">歩き, 羽レールブロック</span>
        <span class="en">Walking, Winged Block on Track</span>
      </td>
      <td>10.666</td><td>10, 11, 11...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">レールブロック</span>
        <span class="en">Block on Track</span>
      </td>
      <td>21.333</td><td>21, 21, 22...</td>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">コンベア(速)+走り</span>
        <span class="en">Conveyor(fast)+Running</span>
      </td>
      <td>3.200</td><td>3, 3, 3, 3, 4...</td>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">コンベア(中)+走り, ドッスン+クラウン</span>
        <span class="en">Conveyor(normal)+Running, Thwomp+Clown Car</span>
      </td>
      <td>4.000</td><td>4...</td>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">コンベア(速)+歩き</span>
        <span class="en">Conveyor(fast)+Walking</span>
      </td>
      <td>4.571</td><td>4, 5, 4, 5, 4, 5, 5...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">コンベア(速)+チョロプー</span>
        <span class="en">Conveyor(fast)+Monty Mole</span>
      </td>
      <td>4.333</td><td>(16, 7, 7, 6, 6, 6, 6, 5, 6, 5, 5, 4, 5, 5), <br>4, 5, 4...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">コンベア(速)+怒ハナチャン</span>
        <span class="en">Conveyor(fast)+Angry Wiggler</span>
      </td>
      <td>5.00</td><td>5...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">コンベア(速)+青トゲメット</span>
        <span class="en">Conveyor(fast)+Blue Spike Top</span>
      </td>
      <td>5.833</td><td>5, 6, 6, 6, 6, 6...</td>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">赤砲台メット</span>
        <span class="en">Shell(red blaster)</span>
      </td>
      <td>3.600</td><td>3, 4, 3, 4, 4...</td>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">コンベア(中)+赤砲台メット</span>
        <span class="en">Conveyor(normal)+Shell(red blaster)</span>
      </td>
      <td>2.937</td><td>2, 3*15...</td>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">コンベア(速)+赤砲台メット</span>
        <span class="en">Conveyor(fasr)+Shell(red blaster)</span>
      </td>
      <td>2.481</td><td>(2, 3)*13, 2...</td>
    </tr>
  </table><br>

  <table class="tableSpeeds">
    <tr class="index">
      <th rowspan="100" class="lightGreen">
        <span class="ja">縦</span>
        <span class="en vertical">Vertical</span>
      </th>
      <th>
        <span class="ja">スクロール方法</span>
        <span class="en">Scroll</span>
      </th>
      <th>
        <span class="ja">平均</span>
        <span class="en">Average</span>
      </th>
      <th>
        <span class="ja">周期</span>
        <span class="en">Cycle</span>
      </th>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">↓自由落下</span>
        <span class="en">↓ Freefall</span>
      </td>
      <td>4.00</td><td>4...</td>
    </tr>
    <tr class="lightGray">
      <td>
        <span class="ja">↓デブロス落下</span>
        <span class="en">↓ Falling Sledge Bro</span>
      </td>
      <td>2.00</td><td>2...</td>
    </tr>
    <tr class="normal">
      <td>
        <span class="ja">↑ブンブン急上昇</span>
        <span class="en">↑ Rising (Boom)^2</span>
      </td>
      <td>5.33</td><td>5, 5, 6...</td>
    </tr>
  </table>

  <hr id="grobalGrounds">
  <h2>グローバル音源配置集</h2>
  <p class="p3">グローバル音源を集めました。</p><br>

  <p class="p2">羽あり音符の往復型ループ端点で音源と接触して1回だけ音を鳴らすような配置。もしくは単に便利そうな音源。<br>
  コストは音源エネミーを除いた必要ELAの値。<br>
  ここでは複数の音源を同時に鳴らすことを"複合"と呼ぶ。</p>
  <br><br>

  <button onclick="funContraptions()">
    <span class="ja">表示 / 非表示</span>
    <span class="en">Display / Hide</span>
  </button>

  <div id="divSetsParent"></div>

  <hr id="diary">
  <h2>雑記</h2><br>
  <div class="sentence">
    <span class="p2">
      私のレール演奏のポストがバズってうれしい。<br>
      それはともかく, #みんなのマリオメーQ もあって少し活気が出ているような気がしますね。<br>
      それから, 一番下の方にある「演奏コース研究会」のサイトにぜひ訪れてみてください。<br>
      研究テーマが色々あって(やる人がいるかは別として)面白いです。<br><br>
      
      このページは主にPCでの使用を想定しております。<br>
      スマホでももちろん使えるのですが, 表とかある関係上大変醜くなっております。<br>
      可能ならばPCからお越しください(レスポンシブ対応が面倒なだけ)。<br><br>
      
      データ, 機能, その他もろもろの誤りや改善案があれば教えてくれると嬉しいです。
    </span><br><br>
  
    <h3>用語と単位集</h3><br><div class="p2">

    <p class="bold">・f, フレーム</p> ...
    <span class="paragraph">
      1/60秒, 観測しうるSMM2の時間最小単位。時間という意味で1f = 1cuである。
      SMM2は60fpsである。
    </span>

    <p class="bold">・b, ブロック幅</p> ...
    <span class="paragraph">
      SMM2の1マス。隣接するブロック間の距離は1bとなる。
    </span>
    
    <p class="bold">・f/b, 遅度</p> ...
    <span class="paragraph">
      ある距離を進むのにかかる時間。速度の逆数で表される。
    </span>
    
    <p class="bold">・cu, うるう距離</p> ...
    <span class="paragraph">
      <a href="https://www.youtube.com/watch?v=nw-DbxZXqsg">解説</a><br>
      羽レールブロックは 3/32 [b/f] の速さで移動する。<br>
      このとき, 途中でレールの端に近づくと, 整数fで表せない(端までの)区間はスキップされるか1fかけて移動される。<br>
      1fに進む距離をdとすると, 余りの距離 &lt; dn (2/3 &lt; n &lt; 11/15) ならばスキップ, そうでないならば1fかけて移動というのが定説である。<a href="https://twitter.com/fnjxbf0b5/status/1771793463815573956">ソース</a><br>
      羽レールブロックの場合はすべてスキップされるため, レール1or2本でレールの端があると本来より早くなる。<br>
      そして, 3本つなげると小数部が消え本来の速さと一致するのだが, 1, 2本までと比べてレール1本当たりにかかる時間が異なるため, この時に何らかの要因でずれが発生し少し遅れると考えられていた。<br>
      このズレがうるう距離である(あくまでも仮説です)。
    </span>
    
    <p class="bold">・G, ギャップ</p> ...
    <span class="paragraph">
      縦断線レールなどの距離または遅延。
    </span>
        
    <p class="bold">・R, レール</p> ...
    <span class="paragraph">
      レールの本数。ここでは直線レールを指す。
    </span>
        
    <p class="bold">・終端遅度</p> ...
    <span class="paragraph">
      マリオやレールブロックが自由落下し, 充分に加速しきった遅度。1bあたり4f。
    </span>
        
    <p class="bold">・集音</p> ...
    <span class="paragraph">
      レール音符を集めること。また, 集音レールはレール音符を集めるためのレール。
    </span>
        
    <p class="bold">・着線</p> ...
    <span class="paragraph">
      レール音符が落下などして, 集音レールに乗ること。
    </span>
        
    <p class="bold">・(自由)落下集音</p> ...
    <span class="paragraph">
      マリオが自由落下し, 一定の遅度で集音すること。<br>
      この時レール音符は, マリオと落下遅度が等しいため水平に一列に並ぶ。
    </span>
        
    <p class="bold">・グローバル</p> ...
    <span class="paragraph">
      マリオが同エリアのどこにいても消失・停止しないようなオブジェクトの状態。<br>
      それに近いものを準グローバルといったりする。<br>
      また, オブジェクトをグローバルにすることをグローバル化という。
    </span>
      
    <p class="bold">・GG, グローバルグラウンド</p> ...
    <span class="paragraph">
      グローバルである床。それに接しているオブジェクトもまたグローバルになるが, 離れるとグローバルでなくなる。<br>
      スネークブロックやレール上のオブジェクト(例外あり)などが該当する。
    </span>
      
    <p class="bold">・座標</p> ...
    <span class="paragraph">
      ここでは右向きをx, 上向きをyとする。
    </span>
        
    <p class="bold">・座標依存性</p> ...
    <span class="paragraph">
      エリアの特定の区間とその他では挙動が異なるという現象が見られ, その現象が起こりうるギミックを座標依存性があるという。<br>
      例えば, ↑G1R1-はエリアの形状に依らず y=16~64 付近でその他のエリアより1fだけ早くなることが知られている。<br>
      メカニズムは完全には解明されていないが, 挙動の変化する境目の座標は今のところすべて2^n付近である。<br>
      これはレール演奏のクォリティに影響を与えるため注意が必要(特にループ周期)。
    </span>
      
    <p class="bold">・ぜんまいメソッド</p> ...
    <span class="paragraph">
      zenmaiさんが開発した集音における手法。<br>
      縦断線レールを通過するのにかかる時間を計測・計算することによって理論的に集音することができる。
    </span>
        
    <p class="bold">・エンティティ, エネミー</p> ...
    <span class="paragraph">
      おおむねおんなじ意味。クリボーやキノコ, はたまたレールブロックなど。
    </span>
        
    <p class="bold">・エンティティリミット</p> ...
    <span class="paragraph">
      いわゆる配置制限。ELA, B, Cが定義されているが, ここではそこまで深く扱わない。
    </span>
        
    <p class="bold">・ELA</p> ...
    <span class="paragraph">
      クリボーやレール音符などのオブジェクトの, 作るモードでの配置制限。100個まで。<br>
      ブロックの中に入っているオブジェクトはカウントされない。
    </span>
        
    <p class="bold">・ELB</p> ...
    <span class="paragraph">
      ELAオブジェクトに加え, 一方通行やスネークブロック, ブロックから出てきたエンティティなどを含め, 遊ぶモードでの制限。これが100以上になるとブロックからELBオブジェクトが生成されなくなる。が, オブジェクトが101個以上存在できないというわけではない。
    </span>
        
    <p class="bold">・音源の複合</p> ...
    <span class="paragraph">
      同時に2つ以上の音源を1つの音符で鳴らすこと。要するに音源エネミーを重ねるだけ。
    </span><br>
        
    ここで定めたものは独自のものであり, ゲーム・数学・物理学・音楽上正しくない, また, 他の人に伝わらない可能性があります。
    </div><br>
  
    <h3>役立つかもしれないTips</h3><br>
    
    <div class="p2">
    <p class="bold">・アシストロード</p> ...
    <span class="paragraph">
      エネミーの足元にリフトなどの読み込み範囲の大きいオブジェクトを配置したり, エネミーを積み重ねたりすることで読み込み範囲を広げられる。<br>
      特に, レール音符ブロックの1マス上にスターを設置すると, 読み込み範囲がy方向に大きく広がることが知られている。
    </span><br>
    
    <p class="bold">・周回型レールループを作るための条件</p> ...
    <span class="paragraph">
      断線を含まない周回型(閉じた)レールループでは, 以下が成り立つ(ほぼ自明)。<br>
      (s = 直線の本数, d = 斜線or曲線の本数) 周回型レールループについて, <br>
      ・任意のループ(s, d)において, (s+2, d), (s, d+2)が存在する。<br>
      ・sが奇数のとき, いかなるループも作成できない。<br>
      ・s = 0 のとき, d >= 4, dが偶数 で作成できる。<br>
      ・s = 2 のとき, d >= 1 で作成できる。<br>
      ・s >= 4, sが偶数 のとき, dの値に依らず作成できる。
    </span><br>
    
    <p class="bold">・各レールの長さ</p> ...
    <span class="paragraph">
      長さ(レール1本を通過するのにかかる時間)[f]は, <br>
      ・羽あり ... 直線21, 斜線30, 曲線36<br>
      ・羽なし ... 直線42, 斜線60, 曲線71
    </span></div>
  </div>

  <hr>
  <h2>参考文献・資料</h2>
  <p class="p3">おいしくいただいております。</p><br>

  <span class="p3">
  <a href="https://www.youtube.com/watch?v=r1Lp6UY5NIc">ぜんまいメソッド解説</a><br>
  <a href="https://www.youtube.com/watch?v=IE5-31xXOFE&list=PLkijGuhvmuKTG2Ve2n2juJwGoFnTa6tLY">レール演奏解説</a><br>
  <a href="https://twitter.com/fnjxbf0b5/status/1601536592879161345">レールループ生成</a><br>
  <a href="https://sites.google.com/view/loopingmusiclab/%E3%83%9B%E3%83%BC%E3%83%A0">演奏コース研究会</a><br>
  </span><br><br><br>

  <p class="p3 bold"><a href="https://twitter.com/Shamoji_SMM">作った人</a></p><br>
  <p class="p2 copyright">(C)opyright (2023 ~ currentTime) null</p>

  <script src="script.js"></script>
</body>
</html>
