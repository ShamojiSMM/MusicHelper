*Last Update: 2024/May/18*

# 【 レール演奏補助ツール 】

**Made by [@Shamoji_SMM](https://x.com/Shamoji_SMM)**



// 本ツールは基本的にフリーです。法律と任天堂の赦す限り、自由に紹介・利用・動画化・~~批評~~などしてもらって構いません。(自作発言とかはダメだよ！)

このツールは、スーパーマリオメーカー2(以下SMM2, マリメ)における「レール演奏」作成の補助を目的としたツールです。  
主にレール演奏を作り慣れている方向けのツールとなっておりますので、あしからず。  

レール演奏とはなんぞや、という方は以下の資料をご覧になることをおすすめします。  

・[ループ演奏入門](https://www.youtube.com/watch?v=IE5-31xXOFE&list=PLkijGuhvmuKTG2Ve2n2juJwGoFnTa6tLY)
レール演奏の詳しい作り方が載ってます。

・[「レール演奏」の仕組み](https://www.youtube.com/watch?v=KGK65KVXegw&list=PLMuQzt5dSbFVWo_9oRgFnCzC1zqaGAwdr&index=1) 
SMM1の情報が多いですが、いろんなレール演奏が載ってます。
 
・[ギャップ調整法の検証と考察](https://www.youtube.com/watch?v=r1Lp6UY5NIc)
後述するレール演奏のロジカルな集音方法について解説されています。

・[縦断線式集音法によるレール演奏の設計](https://drive.google.com/file/d/1weXp44U6FBnwNdutBvv3uM4hxlOpGpgn/view)
レール演奏についてかなり詳細にまとめられた資料です。

・他にも、YouTubeなどで「レール演奏」と検索すると色んなレール演奏が見れます。  

// このツールは多くの先人たちの研究の成果を利用させてもらっています。  
// 特に、レールループ生成は [レールループ周期表](https://twitter.com/fnjxbf0b5/status/1601536592879161345) by @fnjxbf0b5 を自動化したものを含んでおります。  
// その他、マリメに関する様々な研究のおかげでツールを作成することができました。感謝です。  

以下、本ツールの使い方を簡単に紹介します。  
なお、単位や用語に関しては本ツールのページの下の方に載ってます。  


## 1. BPMと符長

4分符長[f] に4分音符の長さを入れると、BPMと他の符長を計算してくれます。  
また、表の下のBPM で逆算できます。  
```
BPM計算の式:
  Beats Per Minutes = 3600 / 1拍の長さ
  3600 = 60seconds * 60frames = 1minutes
```

| **BPM** | **1拍の長さ** |
|--|--|
| 200.00 | 18.0 |
| 171.43 | 21.0 |
| 160.00 | 22.5 |
| 150.00 | 24.0 |
| 141.18 | 25.5 |
| 126.32 | 28.5 |
| 120.00 | 30.0 |
| 100.00 | 36.0 |




## 2. 小節計算

**拍子**: n/m拍子, m分のn拍子  
**長さ[f]**: ループの長さ  


## 3. レールループ生成

**周期[f]**: ループさせたいメロディの長さ。  

**羽あり往復**:
羽ありブロック(音符ブロックやレンガブロックなど)の往復型レールループ。空中飛ばし(断線)なし。偶数周期しか作れない。
  
**羽あり特殊**:
特殊型。断線あり。168f以上のあらゆる周期のループを作成できる優れもの。  

**羽あり周回**:
断線なしの周回型、つまり単純閉曲線。往復型よりは作れる周期が多い。  

**羽なし往復**:
羽なしブロックの往復型。作れる周期は限定的。長めの周期向け。  

**羽なし周回**:
羽なしブロックの周回型。あまり使わない。

特殊型以外は断線を含まないため水中でも使用できます。  
そしてもちろんこの機能はレール演奏以外でも使えます。  
例えば、バーナーの周期は372fなので、372と入力して生成するとバーナーと同じ周期のレールループが作成できます。  
~~バーナーの周期きれいすぎない？~~  


## 4. レールループ周期確認

**直線**, **斜め**, **曲線**, **うるう距離** の本数を入力して周期を計算します。  
(うるうは往復ではなく片道での本数。)  

うるう距離の本数というのは 羽ありなしに関わらず、1fに相当する遅延のことだと解釈すると良いです。
(正直羽なしのうるう距離の定義がややこしい...)


## 5. 表計算

[解説動画](https://www.youtube.com/watch?v=wNRr32pd0Es)

まだ。


## 6. 縦集音配置生成

**狙いの値[f]**: 
表計算の結果[f] の値を入力。この値は、何も調整せず(縦レールを追加せず)下向きに音符ブロックを落としたときと比べての遅延。  

**着線レールとの距離[b]**: 
表計算の高さ[b] の値を入力。  

**並び替え**:
出てきた配置たちを並び替え。通常は"↑長さ 短い順"がおすすめ(スペースを削減できるため)。  

**↓or↑**: 音符ブロックの進行方向。

**-**: -の前が上向きオプション、後が下向きオプション。  

**R**: レールの本数。上オプションがRで終わる場合はレールの上端を閉じる。  

**G**: ギャップ。レール間の距離。  

**F**: 上オプションで上投げ。レールの上端を開く。  

**一致**: ±0。
**誤差**: ±1。
**もっと誤差**: ±2。  

出てきた配置テキスト ( delay/up/down/display ) をクリックすると左に画像が出ます。便利です。  

// 一致だからといって必ずしもズレがないとは言い切れません...  
// 精度向上に努めます。(データの誤り見つけたら教えてね！)


## 7. 画像

レールループの作り方、縦集音の配置方法、高さの数え方、着線パターンが載ってます。  


## 8. スクロール遅度表

横スク、縦スクの平均遅度と遅度周期。  
この値を表計算で使えます。  


## 9. グローバル音源配置集

たぶん便利なグローバル音源たちです。  
スキンごとに使用可能なパーツが載っています。  

追加してほしいものがあったら教えてください。  

## 10. 雑記 / 参考文献・資料・おすすめ

たぶん、きっと有益なことは書いていません。  


**用語と単位集**  
ここで定めているものです。物好きな人はどうぞ。  
うるう距離の説明が難しい。  


**役立つかもしれないTips**  
役立たないかもしれません。  


**参考文献・資料・おすすめ**  
多くの方々の研究のおかげでこのツールを作成することができました。  
心より感謝いたします。  

何かわからないことがあればご気軽に訊いてください。
[レール演奏補助ツール 意見箱](https://docs.google.com/forms/d/e/1FAIpQLSeW5Jks432bwHV40QRZ46uQi8zU1uzYTSiLM7Y2wKlq4MDz_Q/viewform)



**Made by [@Shamoji_SMM](https://x.com/Shamoji_SMM)** 

